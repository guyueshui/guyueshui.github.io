<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Useful Tricks - 水阙</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=author content="Yychi"><meta name=description content="__ __ __ __ ____ ___ /\ \ /\ \ /\ \ __ /\ \ /\ _`\ /\_ \ \ `\`\\/&amp;#39;/__ __ ___\ \ \___ /\_\\ \/ ____ \ \ \L\ \//\ \ ___ __ `\ `\ /&amp;#39;/\ \/\ \ /&amp;#39;___\ \ _ `\/\ \\/ /&amp;#39;,__\ \ \ _ &amp;lt;&amp;#39;\ \ \ / __`\ /&amp;#39;_ `\ `\ \ \\ \ \_\ \/\ \__/\ \ \ \ \ \ \ /\__,"><meta name=keywords content="水阙,yychi"><meta name=generator content="Hugo 0.112.5 with theme even"><link rel=canonical href=https://guyueshui.github.io/tricks/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script>
<link href=/sass/main.min.4db6eefa019323deeb0f96ac97b0195c6875d5cb6a98e30c1e245d54b43d54bc.css rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin=anonymous><link rel=stylesheet href=/css/even-custom.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&family=Noto+Serif+SC:wght@400;500;700&display=swap" rel=stylesheet><meta property="og:title" content="Useful Tricks"><meta property="og:description" content="__ __ __ __ ____ ___ /\ \ /\ \ /\ \ __ /\ \ /\ _`\ /\_ \ \ `\`\\/'/__ __ ___\ \ \___ /\_\\ \/ ____ \ \ \L\ \//\ \ ___ __ `\ `\ /'/\ \/\ \ /'___\ \ _ `\/\ \\/ /',__\ \ \ _ <'\ \ \ / __`\ /'_ `\ `\ \ \\ \ \_\ \/\ \__/\ \ \ \ \ \ \ /\__,"><meta property="og:type" content="article"><meta property="og:url" content="https://guyueshui.github.io/tricks/"><meta property="article:section" content><meta property="article:published_time" content="2019-01-17T22:19:05+00:00"><meta property="article:modified_time" content="2023-06-01T21:49:34+08:00"><meta itemprop=name content="Useful Tricks"><meta itemprop=description content="__ __ __ __ ____ ___ /\ \ /\ \ /\ \ __ /\ \ /\ _`\ /\_ \ \ `\`\\/'/__ __ ___\ \ \___ /\_\\ \/ ____ \ \ \L\ \//\ \ ___ __ `\ `\ /'/\ \/\ \ /'___\ \ _ `\/\ \\/ /',__\ \ \ _ <'\ \ \ / __`\ /'_ `\ `\ \ \\ \ \_\ \/\ \__/\ \ \ \ \ \ \ /\__,"><meta itemprop=datePublished content="2019-01-17T22:19:05+00:00"><meta itemprop=dateModified content="2023-06-01T21:49:34+08:00"><meta itemprop=wordCount content="6549"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Useful Tricks"><meta name=twitter:description content="__ __ __ __ ____ ___ /\ \ /\ \ /\ \ __ /\ \ /\ _`\ /\_ \ \ `\`\\/'/__ __ ___\ \ \___ /\_\\ \/ ____ \ \ \L\ \//\ \ ___ __ `\ `\ /'/\ \/\ \ /'___\ \ _ `\/\ \\/ /',__\ \ \ _ <'\ \ \ / __`\ /'_ `\ `\ \ \\ \ \_\ \/\ \__/\ \ \ \ \ \ \ /\__,"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>Yychi's Blog</a></div><div class=mobile-navbar-icon><span></span>
<span></span>
<span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/search/><li class=mobile-menu-item>Search</li></a><a href=/links/><li class=mobile-menu-item>More</li></a><a href=/post/><li class=mobile-menu-item>Archives</li></a><a href=/tricks/><li class=mobile-menu-item>Tricks</li></a><a href=/sketch/><li class=mobile-menu-item>Sketch</li></a><a href=/about/><li class=mobile-menu-item>About</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>Yychi's Blog</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/search/>Search</a></li><li class=menu-item><a class=menu-item-link href=/links/>More</a></li><li class=menu-item><a class=menu-item-link href=/post/>Archives</a></li><li class=menu-item><a class=menu-item-link href=/tricks/>Tricks</a></li><li class=menu-item><a class=menu-item-link href=/sketch/>Sketch</a></li><li class=menu-item><a class=menu-item-link href=/about/>About</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><article class=post><div class=post-content><pre tabindex=0><code> __    __               __           __               ____    ___                       
/\ \  /\ \             /\ \      __ /\ \             /\  _`\ /\_ \                      
\ `\`\\/&#39;/__  __    ___\ \ \___ /\_\\ \/      ____   \ \ \L\ \//\ \     ___      __     
 `\ `\ /&#39;/\ \/\ \  /&#39;___\ \  _ `\/\ \\/      /&#39;,__\   \ \  _ &lt;&#39;\ \ \   / __`\  /&#39;_ `\   
   `\ \ \\ \ \_\ \/\ \__/\ \ \ \ \ \ \      /\__, `\   \ \ \L\ \\_\ \_/\ \L\ \/\ \L\ \  
     \ \_\\/`____ \ \____\\ \_\ \_\ \_\     \/\____/    \ \____//\____\ \____/\ \____ \ 
      \/_/ `/___/&gt; \/____/ \/_/\/_/\/_/      \/___/      \/___/ \/____/\/___/  \/___L\ \
              /\___/                                                             /\____/
              \/__/                                                              \_/__/ &#39;`
</code></pre><p>此页内容多为软件使用技巧，绝大部分内容来自互联网，如有侵权，请与<a href=mailto:guyueshui002@gmail.com>我</a>联系。也有部分内容系自己使用软件所得的一些经验，仅供参考。</p><h2 id=ffmepg>FFmepg</h2><h3 id=转视频为-gif>转视频为 gif</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ffmpeg -i input.mkv out.gif
</span></span></code></pre></td></tr></table></div></div><p>又：加速播放。假设原视频 60 fps，输出降到 30 fps，丢掉一半的帧。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>ffmpeg -r <span class=m>60</span> -i input.mkv -r <span class=m>30</span> out.gif
</span></span></code></pre></td></tr></table></div></div><p>又：不想丢帧。将输入扩大一倍，输出保留原样。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>ffmpeg -r <span class=m>120</span> -i input.mkv -r <span class=m>60</span> out.gif
</span></span></code></pre></td></tr></table></div></div><p>又：不想全转。从视频的第 2 秒开始，截取 3 秒转化为 gif。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1>## 从视频中第二秒开始，截取时长为 3 秒的片段转化为 gif</span>
</span></span><span class=line><span class=cl>ffmpeg -t <span class=m>3</span> -ss 00:00:02 -i input.mkv out-clip.gif
</span></span></code></pre></td></tr></table></div></div><p>又：控制转化质量。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1>## 默认转化是中等质量模式，若要转化出高质量的 gif，可以修改比特率</span>
</span></span><span class=line><span class=cl>ffmpeg -i input.mkv -b 2048k out.gif
</span></span></code></pre></td></tr></table></div></div><h3 id=vob-转-mp4>VOB 转 MP4</h3><p>cf. <a href=http://www.ruhuamtv.com/thread-9782-1-1.html>http://www.ruhuamtv.com/thread-9782-1-1.html</a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ffmpeg -i 源视频.vob -c:v libx264 -vf yadif -crf <span class=m>18</span> 目标视频.mp4
</span></span></code></pre></td></tr></table></div></div><p>又：合并 VOB 文件。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat VTS_01_1.VOB VTS_01_2.VOB <span class=p>|</span> ffmpeg -y -i - -fflags genpts -vcodec copy -acodec copy ../output.VOB
</span></span></code></pre></td></tr></table></div></div><p>又：合并 mp4 文件。
see: <a href=https://www.tais3.com/others/983.html>https://www.tais3.com/others/983.html</a></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#! /bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1># 将 mp4 文件封装为 ts 格式</span>
</span></span><span class=line><span class=cl>ffmpeg -i a1.mp4 -vcodec copy -acodec copy -vbsf h264_mp4toannexb 1.ts
</span></span><span class=line><span class=cl>ffmpeg -i a2.mp4 -vcodec copy -acodec copy -vbsf h264_mp4toannexb 2.ts
</span></span><span class=line><span class=cl>ffmpeg -i a3.mp4 -vcodec copy -acodec copy -vbsf h264_mp4toannexb 3.ts
</span></span><span class=line><span class=cl>ffmpeg -i a4.mp4 -vcodec copy -acodec copy -vbsf h264_mp4toannexb 4.ts
</span></span><span class=line><span class=cl><span class=c1># 拼接 ts 并导出最终 mp4 文件</span>
</span></span><span class=line><span class=cl>ffmpeg -i <span class=s2>&#34;concat:1.ts|2.ts|3.ts|4.ts&#34;</span> -acodec copy -vcodec copy -absf aac_adtstoasc output.mp4
</span></span><span class=line><span class=cl><span class=c1># 删除过程中生成的 ts 文件</span>
</span></span><span class=line><span class=cl>rm *.ts
</span></span></code></pre></td></tr></table></div></div><p>参考：<a href=https://www.tais3.com/others/983.html>FFMPEG 合并视频文件（无损）</a></p><h3 id=ts-转-mp4>TS 转 MP4</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ffmpeg -y -i your_file.ts -vcodec copy -acodec copy -map 0:v -map 0:a your_file.mp4
</span></span></code></pre></td></tr></table></div></div><p>cf.</p><ol><li><a href="https://www.reddit.com/r/ffmpeg/comments/ggmjep/comment/fq2m1ux/?utm_source=share&amp;utm_medium=web2x&amp;context=3">https://www.reddit.com/r/ffmpeg/comments/ggmjep/comment/fq2m1ux/?utm_source=share&amp;utm_medium=web2x&amp;context=3</a></li><li><a href=https://askubuntu.com/a/716457>https://askubuntu.com/a/716457</a></li></ol><p>分辨率、码率、帧率相关介绍，及相关压缩方法：</p><ol><li><a href=https://blog.csdn.net/weixin_30536861/article/details/114496746>https://blog.csdn.net/weixin_30536861/article/details/114496746</a></li><li><a href=https://zhuanlan.zhihu.com/p/255042580>https://zhuanlan.zhihu.com/p/255042580</a></li></ol><p>写给新手的指令：https://gnu-linux.readthedocs.io/zh/latest/Chapter04/00_ffmpeg.basic.html</p><hr><h2 id=imagemagick>ImageMagick</h2><h3 id=图片转换>图片转换</h3><p>转换图片为指定分辨率。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>convert -resize 1920x1080 src.jpg dst.jpg
</span></span></code></pre></td></tr></table></div></div><p>又：按百分比转换大小。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>convert -resize 50%x50% src.jpg dst.jpg
</span></span></code></pre></td></tr></table></div></div><p>又：忽略原始宽高比。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>convert -resize 300x300! src.jpg dst.jpg
</span></span></code></pre></td></tr></table></div></div><p>又：多张图片合成 gif。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>magick DSC_52<span class=o>{</span>01..09<span class=o>}</span>.JPG out.gif
</span></span><span class=line><span class=cl>magick -delay <span class=m>10</span> *.jpg out.gif  <span class=c1># 指定每张持续 10ms</span>
</span></span></code></pre></td></tr></table></div></div><p>又：更改分辨率。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mogrify -resize 50%x50% *.jpg  <span class=c1># 所有 jpg 缩放至 50%，不加百分号默认单位 px（像素）</span>
</span></span></code></pre></td></tr></table></div></div><p>又，裁切 gif。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl>magick c.gif -coalesce -repage 0x0 -crop 600x600+175+0 +repage output.gif
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>convert input.gif -coalesce -repage 0x0 -crop WxH+X+Y +repage output.gif
</span></span></code></pre></td></tr></table></div></div><ul><li>Animated gifs are often optimised to save space, but imagemagick doesn&rsquo;t seem to consider this when applying the crop command and treats each frame individually. -coalesce rebuilds the full frames.</li><li>Other commands will take into consideration the offset information supplied in the original gif, so you need to force that to be reset with -repage 0x0.</li><li>The crop itself is straightforward, with width, height, x offset and y offset supplied respectively. For example, a crop 40 wide and 30 high at an x offset of 50 = 40x30+50+0.</li><li>Crop does not remove the canvas that it snipped from the image. Applying +repage after the crop will do this.</li></ul><p>cf. <a href=https://stackoverflow.com/a/14036766>https://stackoverflow.com/a/14036766</a></p><hr><h2 id=shell>Shell</h2><h3 id=行内操作>行内操作</h3><ul><li><code>^a</code>: jump to BOL</li><li><code>^e</code>: jump to EOL</li><li><code>^u</code>: delete the line</li><li><code>^k</code>: delete to EOL</li><li><code>^w</code>: delete a word forward</li><li><code>alt+f</code>: jump a word forward</li><li><code>alt+b</code>: jump a word backward</li><li><code>^r</code>: search history</li><li><code>alt+.</code>: complete second parameter</li></ul><h3 id=任务控制>任务控制</h3><ol><li>执行<code>command</code></li><li>按<code>^z</code>挂起当前 job</li><li>按<code>bg</code>后台继续该 job</li><li>按<code>fg</code>召回前台</li></ol><h3 id=后台运行命令>后台运行命令</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=nb>command</span> <span class=p>&amp;</span>
</span></span></code></pre></td></tr></table></div></div><p>或者如果你不想看到任何输出，使用</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=nb>command</span> <span class=p>&amp;</span>&gt; /dev/null <span class=p>&amp;</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>如此你可以继续使用当前 shell</li><li>使用<code>bg</code>查看是否有任务在后台运行</li><li>使用<code>jobs</code>查看后台任务</li><li>使用<code>fg</code>将任务召回前台</li><li>不能退出 shell，否则进程会被杀掉</li><li><strong>使用<code>disown</code>丢掉进程，可以退出 shell</strong></li></ul><p>又：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>nohup <span class=nb>command</span> <span class=p>&amp;</span>&gt; /dev/null <span class=p>&amp;</span>
</span></span></code></pre></td></tr></table></div></div><p>等价于以上的操作。单纯的<code>nohup command</code>会在当前目录创建一个隐藏文件以写入命令的输出。以上命令将程序的输出重定向至比特桶丢弃。</p><h3 id=同时输出到-console-和文件>同时输出到 console 和文件</h3><p>将命令输出重定向到文件：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>SomeCommand &gt; SomeFile.txt  <span class=c1># overwrite</span>
</span></span><span class=line><span class=cl>SomeCommand &gt;&gt; SomeFile.txt <span class=c1># append</span>
</span></span></code></pre></td></tr></table></div></div><p>将命令输出 (stdout) 及报错 (stderr) 重定向到文件：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>SomeCommand <span class=p>&amp;</span>&gt; SomeFile.txt
</span></span><span class=line><span class=cl>SomeCommand <span class=p>&amp;</span>&gt;&gt; SomeFile.txt
</span></span></code></pre></td></tr></table></div></div><p>同时输出到 console 和文件：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>SomeCommand 2&gt;<span class=p>&amp;</span><span class=m>1</span> <span class=p>|</span> tee SomeFile.txt     <span class=c1># overwrite</span>
</span></span><span class=line><span class=cl>SomeCommand 2&gt;<span class=p>&amp;</span><span class=m>1</span> <span class=p>|</span> tee -a SomeFile.txt  <span class=c1># append</span>
</span></span></code></pre></td></tr></table></div></div><pre tabindex=0><code>          || visible in terminal ||   visible in file   || existing
  Syntax  ||  StdOut  |  StdErr  ||  StdOut  |  StdErr  ||   file
==========++==========+==========++==========+==========++===========
    &gt;     ||    no    |   yes    ||   yes    |    no    || overwrite
    &gt;&gt;    ||    no    |   yes    ||   yes    |    no    ||  append
          ||          |          ||          |          ||
   2&gt;     ||   yes    |    no    ||    no    |   yes    || overwrite
   2&gt;&gt;    ||   yes    |    no    ||    no    |   yes    ||  append
          ||          |          ||          |          ||
   &amp;&gt;     ||    no    |    no    ||   yes    |   yes    || overwrite
   &amp;&gt;&gt;    ||    no    |    no    ||   yes    |   yes    ||  append
          ||          |          ||          |          ||
 | tee    ||   yes    |   yes    ||   yes    |    no    || overwrite
 | tee -a ||   yes    |   yes    ||   yes    |    no    ||  append
          ||          |          ||          |          ||
 n.e. (*) ||   yes    |   yes    ||    no    |   yes    || overwrite
 n.e. (*) ||   yes    |   yes    ||    no    |   yes    ||  append
          ||          |          ||          |          ||
|&amp; tee    ||   yes    |   yes    ||   yes    |   yes    || overwrite
|&amp; tee -a ||   yes    |   yes    ||   yes    |   yes    ||  append
</code></pre><p>Ref:</p><ol><li><a href=https://askubuntu.com/questions/420981/how-do-i-save-terminal-output-to-a-file>https://askubuntu.com/questions/420981/how-do-i-save-terminal-output-to-a-file</a></li><li><a href=https://www.gnu.org/software/bash/manual/bash.html#Redirections>https://www.gnu.org/software/bash/manual/bash.html#Redirections</a></li></ol><h3 id=从系统中踢出某个用户>从系统中踢出某个用户</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># See the pid of the user&#39;s login process.</span>
</span></span><span class=line><span class=cl>$ who -u
</span></span><span class=line><span class=cl>yychi    tty1         2020-02-19 21:06  旧        <span class=m>460</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Let him know he will be kick off.</span>
</span></span><span class=line><span class=cl>$ <span class=nb>echo</span> <span class=s2>&#34;You&#39;ll be kick off by system administrator.&#34;</span> <span class=p>|</span> write yychi
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Kick off.</span>
</span></span><span class=line><span class=cl>$ <span class=nb>kill</span> -9 <span class=m>460</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Done.</span>
</span></span></code></pre></td></tr></table></div></div><p>Ref: <a href=https://www.putorius.net/kick-user-off-linux-system.html>https://www.putorius.net/kick-user-off-linux-system.html</a></p><hr><h2 id=command-find>Command <code>find</code></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ find --help
</span></span><span class=line><span class=cl>Usage: find <span class=o>[</span>-H<span class=o>]</span> <span class=o>[</span>-L<span class=o>]</span> <span class=o>[</span>-P<span class=o>]</span> <span class=o>[</span>-Olevel<span class=o>]</span> <span class=o>[</span>-D help<span class=p>|</span>tree<span class=p>|</span>search<span class=p>|</span>stat<span class=p>|</span>rates<span class=p>|</span>opt<span class=p>|</span>exec<span class=o>]</span> <span class=o>[</span>path...<span class=o>]</span> <span class=o>[</span>expression<span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><p>前面的选项不常用，初级使用只需掌握</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>find <span class=o>[</span>path...<span class=o>]</span> <span class=o>[</span>expression<span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><code>path</code> - search path</li><li><code>expression</code> - expands to <code>-options [-print -exec -ok]</code><ul><li><code>-options</code>: 指定 find 常用选项</li><li><code>-print</code>: 将匹配到的文件写入标准输出 [默认]</li><li><code>-exec</code>: 在匹配到的文件上执行一串命令。格式为<code>&lt;command> {} \;</code>，注意 {} 和 ; 之间的空格。<ul><li><code>find . -size 0 -exec rm {} \;</code> - 删除当前目录下 size 为 0 的文件</li><li><code>rm -i $(find . -size 0)</code> - 同上</li><li><code>find . -size 0 | xargs rm -f &</code> - 同上</li></ul></li><li><code>-ok</code>: 同上，执行命令前会询问</li></ul></li></ul><p><strong>常用选项</strong></p><ul><li>name - 按照文件名查找<ul><li><code>find &lt;dir> -name "*.cpp"</code>: 在目录 dir 下查找后缀为 cpp 的文件</li><li><code>-name</code>默认不支持正则表达式，顶多支持通配符<code>*</code></li></ul></li><li>perm - 按照文件权限查找</li><li>user - 按照文件所有者查找</li><li>group - 按照文件所有组查找</li><li>type - 按照文件类型查找</li><li>size - 按照文件大小查找</li><li>&mldr;</li></ul><p><strong>正则表达式</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>find path -regex <span class=s2>&#34;&lt;regex&gt;&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>但是默认的正则表达式引擎我也不知道是啥，反正不解析我习惯的那种正则语法。故使用：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>find . -regextype posix-extended -regex <span class=s2>&#34;.*\.(log|aux|blg)&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>上述命令找出当前文件夹及子文件夹所有后缀名为<code>log</code>,<code>aux</code>,<code>blg</code>的文件。</p><p><strong>几个例子</strong></p><ul><li><code>find . -name "*name*"</code> - 找出当前文件夹文件名包含“name”的文件</li><li><code>find . ! -type d -print</code> - 在当前目录查找非目录文件</li><li><code>find . -newer file1 ! file2</code> - 查找比 file1 新但比 file2 旧的文件</li><li><code>find -type d -empty | xargs -n 1 rmdir</code> - 批量删除当前目录下的空文件夹</li><li><code>find -tyle l -exec ls -l {} +</code> - 找出当前文件夹下损坏的软连接</li></ul><hr><h2 id=command-grep>Command <code>grep</code></h2><p>最基本用法：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 查找 somefile 中匹配到 something 的行</span>
</span></span><span class=line><span class=cl>$ grep <span class=s2>&#34;something&#34;</span> somefile
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 定位 something 所在的行并将接下来的 3 行一并输出</span>
</span></span><span class=line><span class=cl>$ grep <span class=s2>&#34;something&#34;</span> somefile -A <span class=m>3</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 定位 something 所在的行并将之前的 3 行一并输出</span>
</span></span><span class=line><span class=cl>$ grep <span class=s2>&#34;something&#34;</span> somefile -B <span class=m>3</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 定位 something 所在的行并将上下 3 行一并输出</span>
</span></span><span class=line><span class=cl>$ grep <span class=s2>&#34;something&#34;</span> somefile -C <span class=m>3</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>使用正则表达式</strong></p><p><code>grep</code>支持三种正则：basic (BRE), extend (ERE), perl (PCRE). 不同的<code>grep</code>实现方式不同，详见手册。一般 extend 最为常用，语法为</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 在 somefile 中查找包含 his 或者 her 的行</span>
</span></span><span class=line><span class=cl>$ grep -E <span class=s2>&#34;his|her&#34;</span> somefile
</span></span></code></pre></td></tr></table></div></div><p>Ref:</p><ul><li><a href=https://linux.cn/article-6941-1.html>grep 命令系列：grep 中的正则表达式</a></li></ul><hr><h2 id=command-xargs>Command <code>xargs</code></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ whatis xargs
</span></span><span class=line><span class=cl>xargs <span class=o>(</span>1<span class=o>)</span>            - build and execute <span class=nb>command</span> lines from standard input
</span></span></code></pre></td></tr></table></div></div><p>Ref:</p><ul><li><a href=http://c.biancheng.net/linux/xargs.html>xargs 命令：一个给其他命令传递参数的过滤器</a></li></ul><hr><h2 id=command-sed>Command <code>sed</code></h2><hr><h2 id=command-cut>Command <code>cut</code></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ whatis cut
</span></span><span class=line><span class=cl>cut <span class=o>(</span>1<span class=o>)</span>              - remove sections from each line of files
</span></span></code></pre></td></tr></table></div></div><p>基本用法：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 以：为分隔符分割每行，并选择第 1,2,4 列输出</span>
</span></span><span class=line><span class=cl>$ cut -d: -f1,2,4 /etc/passwd
</span></span><span class=line><span class=cl>root❌0
</span></span><span class=line><span class=cl>bin❌1
</span></span><span class=line><span class=cl>daemon❌2
</span></span><span class=line><span class=cl>mail❌12
</span></span><span class=line><span class=cl>ftp❌11
</span></span><span class=line><span class=cl>http❌33
</span></span><span class=line><span class=cl>nobody❌65534
</span></span><span class=line><span class=cl>dbus❌81
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=git>Git</h2><p><strong>创建别名</strong></p><p>使用 <code>git log</code> 查看提交历史，但是输出冗杂。通常使用</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git log --oneline --abbrev-commit --all --graph --decoreate --color
</span></span></code></pre></td></tr></table></div></div><p>来获得更美观易读的输出。但是每次输入这么多肯定很烦人，使用</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>git config --global alias.graph <span class=s2>&#34;log --graph --oneline --decorate=short&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>增加一个全局别名，这个别名对于任何地方的 <code>git</code> 都适用。如此一来，键入 <code>git graph</code> 会等效于</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git log --graph --oneline --decorate<span class=o>=</span>short
</span></span></code></pre></td></tr></table></div></div><p>样例输出：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ git graph
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>* 36f2d65 <span class=o>(</span>HEAD -&gt; master, origin/master, origin/HEAD<span class=o>)</span> Forget it
</span></span><span class=line><span class=cl>* 9b4a6d7 Update ref list
</span></span><span class=line><span class=cl>* 3931d4d Using relative path <span class=k>for</span> image
</span></span><span class=line><span class=cl>* ba18821 Upload pics
</span></span><span class=line><span class=cl>* ceca69a fixed reference
</span></span><span class=line><span class=cl>* be15df2 fixed picture address
</span></span><span class=line><span class=cl>* 97a36f3 Initial commit
</span></span></code></pre></td></tr></table></div></div><p><strong>忽略已经添加的文件</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git rm --cached &lt;somefiles&gt;
</span></span></code></pre></td></tr></table></div></div><p><strong>推送本地分支到远程</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 远程分支如果不存在，则自动创建。</span>
</span></span><span class=line><span class=cl>git push origin &lt;local_brach&gt;:&lt;remote_branch&gt;
</span></span></code></pre></td></tr></table></div></div><p><strong>拉取远程分支到本地</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 从远程分支切换（并创建，如果不存在）本地分支</span>
</span></span><span class=line><span class=cl>git checkout -b &lt;local_branch&gt; origin/&lt;remote_branch&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 另：取回远程分支并创建对应的本地分支，不换自动切换到该分支</span>
</span></span><span class=line><span class=cl>git fetch origin &lt;remote_brach&gt;:&lt;local_branch&gt;
</span></span></code></pre></td></tr></table></div></div><p><strong>删除 commit 历史</strong></p><p>如果不小心将隐私信息推送至远程仓库（如 github），那么仅仅删除再更新再推送到远程仓库覆盖是不够的，别人还是可以通过你的 commit 历史查到你所做的更改，所以这种情况下必须删除之前所有的 commit history. 大致思路是创建一个孤立分支，然后重新添加文件，再删除 master 分支，将新建的分支重命名为 master，再推送到远程强制覆盖 <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Check out to a temporary branch:</span>
</span></span><span class=line><span class=cl>git checkout --orphan TEMP_BRANCH
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Add all the files:</span>
</span></span><span class=line><span class=cl>git add -A
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Commit the changes:</span>
</span></span><span class=line><span class=cl>git commit -am <span class=s2>&#34;Initial commit&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Delete the old branch:</span>
</span></span><span class=line><span class=cl>git branch -D master
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Rename the temporary branch to master:</span>
</span></span><span class=line><span class=cl>git branch -m master
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Finally, force update to our repository:</span>
</span></span><span class=line><span class=cl>git push -f origin master
</span></span></code></pre></td></tr></table></div></div><p><strong>合并某个文件到当前分支</strong></p><p>例如当前在 master 分支，希望合并某个分支 dev 的某个或多个文件到当前分支：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git checkout dev file1 file2 ...
</span></span></code></pre></td></tr></table></div></div><p>但是上述做法会强行覆盖当前分支的文件，没有冲突处理，更安全的做法是先从当前分支新建分支 master_temp，然后在 master_temp 中 checkout，最后再将 master_temp 分支 merge 到 master 分支：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Create a branch based on master</span>
</span></span><span class=line><span class=cl>git checkout -b master_temp
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Chechkout file1 from dev to master_temp</span>
</span></span><span class=line><span class=cl>git checkout dev file1
</span></span><span class=line><span class=cl>git commit -m <span class=s2>&#34;checkout file1 from dev&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Switch to master and merge, then delete</span>
</span></span><span class=line><span class=cl>git checkout master
</span></span><span class=line><span class=cl>git merge master_temp
</span></span><span class=line><span class=cl>git branch -d master_temp
</span></span></code></pre></td></tr></table></div></div><p>Ref: <a href=https://segmentfault.com/a/1190000008360855>https://segmentfault.com/a/1190000008360855</a></p><p><strong>Git merge</strong></p><p>当你觉得很多时候对于一个命令的很多子命令或者选项不是很清晰，而且查了忘，忘了查，那多半是你不理解它的工作机制。或者说它对你来说不是那么自然易懂，这个时候就需要深入以下，了解以下它的基本原理，帮助自己理解，以便记忆。</p><p><code>git merge</code>就是如此，你要知道 merge 的含义是什么？它其实就是在被 merge 的分支上重现要 merge 的 commits. 比如说：</p><pre tabindex=0><code>a---b---c---d---e (master)
    \
     `--A---B---C (dev)
</code></pre><p>你当前在 master 分支的 e 节点，你要 merge dev 分支。其实就是将 A、B、C 三个 commit 在 master 分支上重现，仿佛 master 分支上曾经也做过这些改动。那么冲突的来源就是你在两个分支中，对同一个文件作了不同的改动，如何解决不言而喻。</p><p>小朋友，你是否有很多？</p><p>Q: 我想只重现 B 节点怎么办？<br>A: <code>git checkout master && git cherry-pick 62ecb3</code>，这里<code>62ecb3</code>是节点 B 的 commit 标识。</p><p>Q: 我想重现 A-B，但不要 C 怎么办？<br>A: <code>git checkout -b newbranch 62ecb3 && git rebase --onto master 76cada^</code>，这里<code>76cada</code>是 A 节点的 commit 标识。先基于 B 创建一个分支，这个分支包含了 A 节点的改动，然后 rebase 到 master 上去，结果就是 A 和 B 重现在 master 分支上。</p><p>Ref:</p><ol><li><a href=https://stackoverflow.com/questions/161813/how-to-resolve-merge-conflicts-in-git>https://stackoverflow.com/questions/161813/how-to-resolve-merge-conflicts-in-git</a></li><li><a href=https://www.devroom.io/2010/06/10/cherry-picking-specific-commits-from-another-branch/>Cherry-Picking specific commits from another branch</a></li></ol><p><strong>Fork 之后如何同步 fork 源的更新</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># see remote status</span>
</span></span><span class=line><span class=cl>git remote -v
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># add upstream if not exist one</span>
</span></span><span class=line><span class=cl>git remote add upstream https://github.com/&lt;origin_owner&gt;/&lt;origin_repo&gt;.git
</span></span><span class=line><span class=cl>git remote -v
</span></span></code></pre></td></tr></table></div></div><p>从上游仓库 fetch 分支和提交点，提交给本地 master，并会被存储在一个本地分支 upstream/master</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git fetch upstream
</span></span></code></pre></td></tr></table></div></div><p>切换到任意分支，merge 已经 fetch 的分支即可：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git checkout somebrach
</span></span><span class=line><span class=cl>git merge upstream/master
</span></span></code></pre></td></tr></table></div></div><p>see: <a href=https://www.zhihu.com/question/28676261>https://www.zhihu.com/question/28676261</a></p><p>Ref:</p><ol><li><a href=https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/configuring-a-remote-for-a-fork>Configureing a remote for a fork</a></li><li><a href=https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/syncing-a-fork>Syncing a fork</a></li></ol><p><strong>从另一个分支检出某个文件并重命名</strong></p><p>有时候开了一个孤立分支，但是想参考其他分支的代码，而当前分支又有同名文件，此时就需要从其他分支检出文件并重命名。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># show the content of a.cpp in specific commit HEAD^</span>
</span></span><span class=line><span class=cl>git show HEAD^:a.cpp
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># that&#39;s done</span>
</span></span><span class=line><span class=cl>git show HEAD^:a.cpp &gt; b.cpp
</span></span></code></pre></td></tr></table></div></div><p>Ref: search &ldquo;git-checkout older revision of a file under a new name&rdquo; in stack overflow</p><p><strong>查看已被跟踪的文件</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git ls-files
</span></span></code></pre></td></tr></table></div></div><p>Ref: search &ldquo;how can i make git show a list of the files that are being tracked&rdquo; in stack overflow</p><p><strong>submodule</strong></p><p>git submodule 本质上是指向一个其他仓库的链接，默认 clone 不会将 submodule 对应的仓库克隆下来。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># help</span>
</span></span><span class=line><span class=cl>git submodule --help
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 添加 submodule</span>
</span></span><span class=line><span class=cl><span class=c1>#   1. 进入目标子文件夹</span>
</span></span><span class=line><span class=cl>git submodule add https://github.com/imtianx/liba.git
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 更新 submodule</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> xxx
</span></span><span class=line><span class=cl>git pull
</span></span><span class=line><span class=cl>git submodule update --recursive
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 在主目录下更新 submodule liba</span>
</span></span><span class=line><span class=cl>git submodule update --remote liba
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 删除 submodule</span>
</span></span><span class=line><span class=cl>vim .gitmodules <span class=c1># 删除相应条目</span>
</span></span><span class=line><span class=cl>vim .git/config <span class=c1># 删除相应条目</span>
</span></span><span class=line><span class=cl>rm -rf .git/modules/liba <span class=c1># 删除对应的 git 文件夹</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 在克隆时连同 submodule 一并克隆</span>
</span></span><span class=line><span class=cl>git clone https://github.com/imtianx/MainProject.git --recursive
</span></span><span class=line><span class=cl><span class=c1># is equivalent to</span>
</span></span><span class=line><span class=cl>git clone https://github.com/imtianx/MainProject.git
</span></span><span class=line><span class=cl>git submodule init
</span></span><span class=line><span class=cl>git submodule update
</span></span></code></pre></td></tr></table></div></div><p>一般地，当某仓库中包含 submodule ./dir1 时，如果你只提交了 dir1 的内容，那么当前仓库是不会用上最新版本的 dir1 的。这在远程仓库中尤为显著。我的博客文件夹 BlogHugo 中包含了 themes/even 的 submodule, 每当我在 even 中改完样式推送到远端后（这里我 BlogHugo 仓库没有任何修改），发现 build 出来的网站压根没有使用最新的 submodule 里面的内容。究其原因，其实是父仓库默认会跟踪 submodule 的一个版本号。如果不在父仓库中显示更新要跟踪的版本号，则父仓库一直会跟踪之前的版本号。这是合理的，因为父子仓库独立开发，为了避免子仓库（submodule）的频繁提交对父仓库的构建产生影响，所以默认会跟踪一个版本号。</p><p>正确的做法是，当 submodule 更新后，父仓库中 submodule 的版本号会产生一个修改，在父仓库中 add-commit 这个修改，就可以更新父仓库中引用的 submodule 版本号。</p><p>Ref:</p><ol><li><a href=https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E5%AD%90%E6%A8%A1%E5%9D%97>Git-工具 - 子模块</a></li><li><a href=https://juejin.im/post/6844903572950401038>Git 子模块：git submodule</a></li></ol><p><strong>如何撤销本地 commit</strong></p><p>有时候本地 add 了一写 diff，随手 commit 了，接着又有些 diff 可以共用这个 commit，就想撤销刚刚的 commit，把所有的 diff 合并在一起作为一次 commit。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># for more info, type git reset -h</span>
</span></span><span class=line><span class=cl>git reset --soft &lt;commit_id&gt;
</span></span></code></pre></td></tr></table></div></div><p><strong>修改已提交的 commit message</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># commit_id 至少比要修改的那个 commit 早一个版本</span>
</span></span><span class=line><span class=cl>git rebase -i &lt;commit_id&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 列出 rebase 的 commit 列表，不包含 &lt;commit id&gt;</span>
</span></span><span class=line><span class=cl>$ git rebase -i &lt;commit id&gt;
</span></span><span class=line><span class=cl><span class=c1># 最近 3 条</span>
</span></span><span class=line><span class=cl>$ git rebase -i HEAD~3
</span></span><span class=line><span class=cl><span class=c1># 本地仓库没 push 到远程仓库的 commit 信息</span>
</span></span><span class=line><span class=cl>$ git rebase -i
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># vi 下，找到需要修改的 commit 记录，`pick` 修改为 `edit` 或 `e`，`:wq` 保存退出</span>
</span></span><span class=line><span class=cl><span class=c1># 重复执行如下命令直到完成</span>
</span></span><span class=line><span class=cl>$ git commit --amend --message<span class=o>=</span><span class=s2>&#34;modify message by daodaotest&#34;</span> --author<span class=o>=</span><span class=s2>&#34;jiangliheng &lt;jiang_liheng@163.com&gt;&#34;</span>
</span></span><span class=line><span class=cl>$ git rebase --continue
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 中间也可跳过或退出 rebase 模式</span>
</span></span><span class=line><span class=cl>$ git rebase --skip
</span></span><span class=line><span class=cl>$ git rebase --abort
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 如果只是更改 last commit</span>
</span></span><span class=line><span class=cl>git commit --amend
</span></span></code></pre></td></tr></table></div></div><p><strong>Git rebase</strong></p><p>Cf. <a href=https://www.atlassian.com/git/tutorials/rewriting-history/git-rebase>https://www.atlassian.com/git/tutorials/rewriting-history/git-rebase</a></p><p><code>rebase</code>和<code>merge</code>都是将另一分支的提交（commit）集成到当前分支的方法。而 merge 会保留两条分支的所有 commit，然后解决冲突，然后形成一个 merge commit，从 git log 上来看，原本线性的提交历史分了叉，然后又合了并。而 rebase 则是基于当前分支的某次提交去重现另一个分支，rebase 之后依然能够保留提交历史的线性状态。</p><pre tabindex=0><code>a---b---c---d---e (master)
    \
     `--A---B---C (dev)
</code></pre><blockquote><p>From a content perspective, rebasing is changing the base of your branch from one commit to another making it appear as if you&rsquo;d created your branch from a different commit. Internally, Git accomplishes this by creating new commits and applying them to the specified base. It&rsquo;s very important to understand that even though the branch looks the same, it&rsquo;s composed of entirely new commits.</p><p>The primary reason for rebasing is to maintain a linear project history. For example, consi der a situation where the main branch has progressed since you started working on a feature branch. You want to get the latest updates to the main branch in your feature branch, but you want to keep your branch&rsquo;s history clean so it appears as if you&rsquo;ve been working off the latest main branch.</p><p>You have two options for integrating your feature into the main branch: merging directly or rebasing and then merging. The former option results in a 3-way merge and a merge commit, while the latter results in a fast-forward merge and a perfectly linear history. The following diagram demonstrates how rebasing onto the main branch facilitates a fast-forward merge.</p><p>Rebasing is a common way to integrate upstream changes into your local repository. Pulling in upstream changes with Git merge results in a superfluous merge commit every time you want to see how the project has progressed. On the other hand, rebasing is like saying, “I want to base my changes on what everybody has already done.”</p></blockquote><p>注：写这个的时候，我自己对 rebase 的理解也很模糊。</p><p>任何时候不清楚的时候请终止 rebase:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git rebase --abort
</span></span></code></pre></td></tr></table></div></div><p>反复操练几次，git 有友好的提示信息。</p><hr><h2 id=command-g>Command <code>g++</code></h2><p>自定义包含路径</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>g++ main.cpp -I/usr/local/include
</span></span></code></pre></td></tr></table></div></div><p>自定义链接静态或动态库</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>g++ main.cpp -L/path/to/lib_file
</span></span><span class=line><span class=cl>g++ main.cpp -L/usr/lib64 -lcurl -lssl
</span></span></code></pre></td></tr></table></div></div><p>上面第二个命令链接了<code>/usr/lib64/</code>目录下的<code>libcurl.so</code>和<code>libssl.so</code>两个动态库文件。静态库也是同样链接。说起来静态库，想起了最近折腾的一个东西，你可能会想把多个静态库合成一个静态库，想当然的直接用<code>ar</code>合并，但是不行，必须要把两个静态库全解压出来，再合并所有的 object file. 参见：<a href=https://www.cnblogs.com/fnlingnzb-learner/p/8127456.html>here</a></p><p>生成机器码</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>g++ main.cpp -c
</span></span></code></pre></td></tr></table></div></div><p>生成汇编代码</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>g++ main.cpp -S
</span></span></code></pre></td></tr></table></div></div><p>仅预编译</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>g++ main.cpp -E &gt; main.i
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=aria2c>Aria2c</h2><p><a href=https://aria2.github.io/>aria2c</a> 是个好东西。支持连接，磁力，种子下载。轻量且强大，可直接使用，也可作为服务端，配合 WebUI 使用。</p><ul><li>配置：参考 <a href=https://binux.blog/2012/12/aria2-examples/>aria2 配置示例</a></li><li>WebUI:<ul><li><a href=http://binux.github.io/yaaw/demo/>YAAW</a></li><li><a href=https://ziahamza.github.io/webui-aria2/#>ziahamza</a></li><li><a href=http://ariang.mayswind.net/latest/>AriaNg</a></li></ul></li></ul><p>Note: jsonrpc 地址格式为 <code>http://token:&lt;rpc-secret>@hostname:port/jsonrpc</code>
令牌填写自己设置的 <code>rpc-secret</code>
<img src=https://i.loli.net/2018/12/28/5c263327c4214.png alt></p><p><code>xxx</code> 替换为自己设置的 <code>rpc-secret</code>
<img src=https://i.loli.net/2018/12/28/5c263398854c3.png alt></p><h2 id=mpv>MPV</h2><p><a href=https://mpv.io>MPV</a> 是一个轻量、简约、跨平台的播放器。据我自己体验，在 Linux 下比 mplayer 播放效果要好，mplayer 倍速会掉帧，而 mpv 则不太明显。</p><h2 id=html>HTML</h2><p>给网页添加 BGM。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>embed</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;bgm.mp3&#34;</span> <span class=na>autostart</span><span class=o>=</span><span class=s>&#34;true&#34;</span> <span class=na>loop</span><span class=o>=</span><span class=s>&#34;true&#34;</span> <span class=na>width</span><span class=o>=</span><span class=s>&#34;300&#34;</span> <span class=na>height</span><span class=o>=</span><span class=s>&#34;20&#34;</span> <span class=na>hidden</span><span class=o>=</span><span class=s>&#34;true&#34;</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>又，添加可以控制播放的音乐。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>audio</span> <span class=na>autoplay</span><span class=o>=</span><span class=s>&#34;autoplay&#34;</span> <span class=na>controls</span><span class=o>=</span><span class=s>&#34;controls&#34;</span> <span class=na>loop</span><span class=o>=</span><span class=s>&#34;loop&#34;</span> <span class=na>preload</span><span class=o>=</span><span class=s>&#34;auto&#34;</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;music.mp3&#34;</span><span class=p>&gt;</span>Your browser doesn&#39;t support H5 audio flag!<span class=p>&lt;/</span><span class=nt>audio</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=使用xrandr设置多屏显示>使用<code>xrandr</code>设置多屏显示</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ xrandr
</span></span><span class=line><span class=cl>Screen 0: minimum <span class=m>320</span> x 200, current <span class=m>1920</span> x 1080, maximum <span class=m>8192</span> x <span class=m>8192</span>
</span></span><span class=line><span class=cl>eDP-1 connected primary 1920x1080+0+0 <span class=o>(</span>normal left inverted right x axis y axis<span class=o>)</span> 294mm x 165mm
</span></span><span class=line><span class=cl>   1920x1080     59.93*+
</span></span><span class=line><span class=cl>   1680x1050     59.95    59.88
</span></span><span class=line><span class=cl>   1400x1050     59.98
</span></span><span class=line><span class=cl>   1600x900      59.99    59.94    59.95    59.82
</span></span><span class=line><span class=cl>   1280x1024     60.02
</span></span><span class=line><span class=cl>   1400x900      59.96    59.88
</span></span><span class=line><span class=cl>   1280x960      60.00
</span></span><span class=line><span class=cl>   1440x810      60.00    59.97
</span></span><span class=line><span class=cl>   1368x768      59.88    59.85
</span></span><span class=line><span class=cl>   1280x800      59.99    59.97    59.81    59.91
</span></span><span class=line><span class=cl>   1280x720      60.00    59.99    59.86    59.74
</span></span><span class=line><span class=cl>   1024x768      60.04    60.00
</span></span><span class=line><span class=cl>   960x720       60.00
</span></span><span class=line><span class=cl>   928x696       60.05
</span></span><span class=line><span class=cl>   896x672       60.01
</span></span><span class=line><span class=cl>   1024x576      59.95    59.96    59.90    59.82
</span></span><span class=line><span class=cl>   960x600       59.93    60.00
</span></span><span class=line><span class=cl>   960x540       59.96    59.99    59.63    59.82
</span></span><span class=line><span class=cl>   800x600       60.00    60.32    56.25
</span></span><span class=line><span class=cl>   840x525       60.01    59.88
</span></span><span class=line><span class=cl>   864x486       59.92    59.57
</span></span><span class=line><span class=cl>   700x525       59.98
</span></span><span class=line><span class=cl>   800x450       59.95    59.82
</span></span><span class=line><span class=cl>   640x512       60.02
</span></span><span class=line><span class=cl>   700x450       59.96    59.88
</span></span><span class=line><span class=cl>   640x480       60.00    59.94
</span></span><span class=line><span class=cl>   720x405       59.51    58.99
</span></span><span class=line><span class=cl>   684x384       59.88    59.85
</span></span><span class=line><span class=cl>   640x400       59.88    59.98
</span></span><span class=line><span class=cl>   640x360       59.86    59.83    59.84    59.32
</span></span><span class=line><span class=cl>   512x384       60.00
</span></span><span class=line><span class=cl>   512x288       60.00    59.92
</span></span><span class=line><span class=cl>   480x270       59.63    59.82
</span></span><span class=line><span class=cl>   400x300       60.32    56.34
</span></span><span class=line><span class=cl>   432x243       59.92    59.57
</span></span><span class=line><span class=cl>   320x240       60.05
</span></span><span class=line><span class=cl>   360x202       59.51    59.13
</span></span><span class=line><span class=cl>   320x180       59.84    59.32
</span></span><span class=line><span class=cl>DP-1 disconnected <span class=o>(</span>normal left inverted right x axis y axis<span class=o>)</span>
</span></span><span class=line><span class=cl>HDMI-1 disconnected <span class=o>(</span>normal left inverted right x axis y axis<span class=o>)</span>
</span></span><span class=line><span class=cl>HDMI-2 connected 1920x1080+0+0 <span class=o>(</span>normal left inverted right x axis y axis<span class=o>)</span> 527mm x 296mm
</span></span><span class=line><span class=cl>   1920x1080     60.00*+  60.00    50.00    59.94
</span></span><span class=line><span class=cl>   1920x1080i    60.00    60.00    50.00    59.94
</span></span><span class=line><span class=cl>   1600x1200     60.00
</span></span><span class=line><span class=cl>   1280x1024     75.02    60.02
</span></span><span class=line><span class=cl>   1152x864      75.00
</span></span><span class=line><span class=cl>   1280x720      60.00    60.00    50.00    59.94
</span></span><span class=line><span class=cl>   1024x768      75.03    60.00
</span></span><span class=line><span class=cl>   800x600       75.00    60.32
</span></span><span class=line><span class=cl>   720x576       50.00    50.00
</span></span><span class=line><span class=cl>   720x576i      50.00    50.00
</span></span><span class=line><span class=cl>   720x480       60.00    60.00    59.94    59.94    59.94
</span></span><span class=line><span class=cl>   720x480i      60.00    60.00    59.94    59.94
</span></span><span class=line><span class=cl>   640x480       75.00    60.00    59.94    59.94
</span></span><span class=line><span class=cl>   720x400       70.08
</span></span></code></pre></td></tr></table></div></div><p>观察输出可知，连接了两个显示器 (eDP-1, HDMI-2)，其中 eDP-1 是主显示器。如果第二块屏幕无显示，执行下面的命令。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>xrandr --output HDMI-2
</span></span></code></pre></td></tr></table></div></div><p>又，指定分辨率为 1920x1080，</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>xrandr --output HDMI-2 --mode 1920x1080
</span></span></code></pre></td></tr></table></div></div><p>又，设置为右侧扩展屏，即光标向右可移动至第二块屏，</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>xrandr --output HDMI-2 --right-of eDP-1
</span></span></code></pre></td></tr></table></div></div><p>又，连接上第二块屏，想关掉内置显示屏，（警告：不要随便关掉内置屏）</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>xrandr --output eDP-1 --off
</span></span></code></pre></td></tr></table></div></div><p>又，开启内置屏。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>xrandr --output eDP-1 --auto
</span></span></code></pre></td></tr></table></div></div><p>某些情况下会无法检测显示器的最大分辨率，此时需要手动设置显示器的分辨率。参考<a href=https://wiki.archlinuxcn.org/zh-hans/Xrandr#%E6%B7%BB%E5%8A%A0%E6%9C%AA%E8%A2%AB%E6%A3%80%E6%B5%8B%E5%88%B0%E7%9A%84%E6%9C%89%E6%95%88%E5%88%86%E8%BE%A8%E7%8E%87>此处</a>。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 获取参数值</span>
</span></span><span class=line><span class=cl>$ cvt <span class=m>2560</span> <span class=m>1440</span>
</span></span><span class=line><span class=cl><span class=c1># 2560x1440 59.96 Hz (CVT 3.69M9) hsync: 89.52 kHz; pclk: 312.25 MHz</span>
</span></span><span class=line><span class=cl>Modeline <span class=s2>&#34;2560x1440_60.00&#34;</span>  312.25  <span class=m>2560</span> <span class=m>2752</span> <span class=m>3024</span> <span class=m>3488</span>  <span class=m>1440</span> <span class=m>1443</span> <span class=m>1448</span> <span class=m>1493</span> -hsync +vsync
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 新建 mode</span>
</span></span><span class=line><span class=cl>$ xrandr --newmode <span class=s2>&#34;2560x1440_60.00&#34;</span>  312.25  <span class=m>2560</span> <span class=m>2752</span> <span class=m>3024</span> <span class=m>3488</span>  <span class=m>1440</span> <span class=m>1443</span> <span class=m>1448</span> <span class=m>1493</span> -hsync +vsync
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 为指定显示设备 add mode</span>
</span></span><span class=line><span class=cl>$ xrandr --addmode HDMI2 <span class=s2>&#34;2560x1440_60.00&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 指定显示器分辨率</span>
</span></span><span class=line><span class=cl>$ xrandr --output HDMI2 --mode <span class=s2>&#34;2560x1440_60.00&#34;</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>如果显示屏分辨率更改成功但窗口显示不完整（即只有左上角以指定分辨率显示，其他部分空白），可以尝试关闭内置显示屏，此时显示器应该能以完整窗口显示内容。</p></blockquote><hr><h2 id=网络>网络</h2><p>查看被监听端口</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>netstat -tulpn <span class=p>|</span> grep LISTEN
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=htop-基本操作>Htop 基本操作</h2><p>Htop 类似于 top，但比 top 更现代化，支持鼠标操作，支持颜色主题。在命令行键入 htop，会呈现如下界面。(图片来源：https://blog.csdn.net/freeking101/article/details/79173903)</p><p><img src=/img/htop.jpg alt></p><p>平均负载区的三个数字分别表示过去 5、10、15 分钟系统的平均负载。进程区每一列的意义分别是：</p><ul><li>PID: 进程号</li><li>USER: 进程所有者的用户名</li><li>PRI: 优先级别</li><li>NI: NICE 值（优先级别数值），越小优先级越高</li><li>VIRT: 虚拟内存</li><li>RES: 物理内存</li><li>SHR: 共享内存</li><li>S: 进程状态（S[leep], R[unning], Z[ombie], N 表示优先级为负数）</li><li>CPU%: 该进程占用的 CPU 使用率</li><li>MEM%: 该进程占用的物理内存和总内存的百分比</li><li>TIME+: 该进程启动后占用的 CPU 时间</li><li>Command: 该进程的启动命令</li></ul><p>常用快捷键可在 htop 界面按？显示。</p><ul><li>H: 显示/隐藏用户子线程</li><li>Space: 标记进程</li><li>k: 杀死已标记进程</li></ul><h1 id=reference>Reference</h1><ul><li><a href=https://kxp555.coding.me/2017/11/23/Linux%E4%B8%8B%E8%A7%86%E9%A2%91%E8%BD%ACgif/>linux 下视频转 gif</a></li><li><a href=https://www.maketecheasier.com/run-bash-commands-background-linux/>Running Bash Commands in the Background the Right Way [Linux]</a></li></ul><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://gist.github.com/heiswayi/350e2afda8cece810c0f6116dadbe651>https://gist.github.com/heiswayi/350e2afda8cece810c0f6116dadbe651</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div></article></div></div></main><footer id=footer class=footer><div class=social-links><a href=mailto:guyueshui002@gmail.com class="iconfont icon-email" title=email></a>
<a href=https://github.com/guyueshui class="iconfont icon-github" title=github></a></div><div class=copyright><span class=power-by>Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a></span>
<span class=division>|</span>
<span class=theme-info>Theme -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a></span><div class=busuanzi-footer></div><span class=copyright-year>&copy;
2018 -
2023<span class=heart><i class="iconfont icon-heart"></i></span><span>Yychi</span></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script src=https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js></script></body></html>